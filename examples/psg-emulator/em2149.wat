   (module (memory $memory 1 ) (export "memory" (memory $memory)) (data (i32.const 4096) "\ff\00\00\00\0f\00\00\00\ff\00\00\00\0f\00\00\00\ff\00\00\00\0f\00\00\00\1f\00\00\00\3f\00\00\00\1f\00\00\00\1f\00\00\00\1f\00\00\00\ff\00\00\00\ff\00\00\00\0f\00\00\00\ff\00\00\00\ff\00\00\00")(data (i32.const 4160) "\00\00\00\00\00\00\00\00\01\00\00\00\02\00\00\00\02\00\00\00\03\00\00\00\03\00\00\00\04\00\00\00\05\00\00\00\06\00\00\00\07\00\00\00\09\00\00\00\1f\00\00\00\21\00\00\00\23\00\00\00\12\00\00\00\16\00\00\00\2e\00\00\00\33\00\00\00\25\00\00\00\41\00\00\00\35\00\00\00\53\00\00\00\60\00\00\00\6e\00\00\00\7e\00\00\00\93\00\00\00\97\00\00\00\f4\01\00\00\16\02\00\00\53\02\00\00\53\02\00\00\00\00\00\00\00\00\00\00\01\00\00\00\01\00\00\00\02\00\00\00\02\00\00\00\03\00\00\00\03\00\00\00\05\00\00\00\05\00\00\00\07\00\00\00\07\00\00\00\1f\00\00\00\1f\00\00\00\23\00\00\00\23\00\00\00\16\00\00\00\16\00\00\00\33\00\00\00\33\00\00\00\41\00\00\00\41\00\00\00\53\00\00\00\53\00\00\00\6e\00\00\00\6e\00\00\00\93\00\00\00\93\00\00\00\f4\01\00\00\f4\01\00\00\53\02\00\00\53\02\00\00") (func $internal_refresh (if  (i32.eqz (i32.load (i32.const 4564))) (then (i32.store (i32.const 4560) (i32.wrap_i64 (i64.div_u (i64.mul (i64.extend_i32_u (i32.load (i32.const 4552))) (i64.const 16777216) ) (i64.shl (i64.extend_i32_u (i32.load (i32.const 4556))) (i32.const 4) ) ) ) ) ) (else (i32.store (i32.const 4560) (i32.const 16777216)) (i32.store (i32.const 4704) (i32.div_u (i32.const -2147483648) (i32.load (i32.const 4556)) ) ) (i32.store (i32.const 4712) (i32.div_u (i32.const -2147483648) (i32.shr_u (i32.load (i32.const 4552)) (i32.const 4)) ) ) (i32.store (i32.const 4708) (i32.const 0)) ) ) ) (func $set_rate (param $r i32) (i32.store (i32.const 4556) (local.get $r)) (call $internal_refresh) ) (func $set_quality (param $q i32) (i32.store (i32.const 4564) (local.get $q)) (call $internal_refresh) ) (func $init (param $c i32) (param $r i32) (call $set_volume_mode (i32.const 1)) (i32.store (i32.const 4552) (i32.const 0)) (i32.store (i32.const 4556) (select (local.get $r) (i32.const 44100) (i32.eqz (local.get $r)) ) ) (call $set_quality (i32.const 0)) ) (func $set_volume_mode (param $type i32) (i32.store (i32.const 4544) (i32.add (i32.const 4160) (i32.shl (local.get $type) (i32.const 5)))) ) (func $set_mask (param $mask i32) (result i32) (i32.load (i32.const 4640)) (i32.store (i32.const 4640) (local.get $mask)) ) (func $toggle_mask (param $mask i32) (result i32) (i32.load (i32.const 4640)) (i32.store (i32.const 4640) (i32.xor (i32.load (i32.const 4640)) (i32.const 0xffff_ffff)) ) ) (func $reset (local $c i32) (local $work i32) (local $size i32) (local $count i32) (local $freq i32) (local $edge i32) (local $volume i32) (local $ch_out i32) (local.set $count (i32.const 4568)) (local.set $freq (i32.const 4592)) (local.set $edge (i32.const 4604)) (local.set $volume (i32.const 4580)) (local.set $ch_out (i32.const 4732)) (i32.store (i32.const 4644) (i32.const 0)) (local.tee $c (i32.const 3)) (block $exit (loop $loop (br_if $exit (i32.eqz)) (local.tee $c (i32.sub (local.get $c) (i32.const 1))) (i32.store (local.get $count) (i32.const 0x1000)) (i32.store (local.get $freq) (i32.const 0)) (i32.store (local.get $edge) (i32.const 0)) (i32.store (local.get $volume) (i32.const 0)) (i32.store (local.get $ch_out) (i32.const 0)) (local.set $count (i32.add (local.get $count) (i32.const 4))) (local.set $freq (i32.add (local.get $freq) (i32.const 4))) (local.set $edge (i32.add (local.get $edge) (i32.const 4))) (local.set $volume (i32.add (local.get $volume) (i32.const 4))) (local.set $ch_out (i32.add (local.get $ch_out) (i32.const 4))) (br $loop) ) ) (i32.store (i32.const 4640) (i32.const 0))  (local.tee $c (i32.const 16)) (local.set $work (i32.const 4416)) (block $exit_reg (loop $loop_reg (br_if $exit_reg (i32.eqz )) (local.tee $c (i32.sub (local.get $c) (i32.const 1))) (i32.store (local.get $work) (i32.const 0)) (local.set $work (i32.add (local.get $work) (i32.const 4640)) ) (br $loop) ) ) (i32.store (i32.const 4728) (i32.const 0)) (i32.store (i32.const 4696) (i32.const 0x40)) (i32.store (i32.const 4700) (i32.const 0)) (i32.store (i32.const 4648) (i32.const 0)) (i32.store (i32.const 4652) (i32.const 0)) (i32.store (i32.const 4684) (i32.const 0)) (i32.store (i32.const 4688) (i32.const 0)) (i32.store (i32.const 4676) (i32.const 0)) (i32.store (i32.const 4548) (i32.const 0)) ) (func $read_io (result i32) (i32.load (i32.add (i32.const 4416) (i32.shl (i32.load (i32.const 4728)) (i32.const 2)) ) ) ) (func $read_reg (param $reg i32) (result i32) (i32.load (i32.add (i32.const 4416) (i32.shl (local.get $reg) (i32.const 2)) ) ) ) (func $write_io (param $adr i32) (param $val i32) (if (i32.and (local.get $adr) (i32.const 1)) (then (call $write_reg (i32.load (i32.const 4728)) (local.get $val)) ) (else (i32.store (i32.const 4728) (i32.and (local.get $val) (i32.const 0x1f))) ) ) ) (func $update_output (i32.store (i32.const 4644) (i32.add (i32.load (i32.const 4644)) (i32.load (i32.const 4560)) ) ) ) ) 